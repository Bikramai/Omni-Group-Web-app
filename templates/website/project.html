{% extends 'website/base.html' %}
{% load static %}

{% block sub_head %}
    Projects
{% endblock %}

{% block content %}

    {# HERO SECTION #}
    <section class="wrapper image-wrapper bg-image bg-overlay text-white"
             data-image-src="{% static 'website/img/photos/bg4.jpg' %}"
             style="background-image: url({% static 'website/core/bg/carousel-02.jpg' %};);"
    >
        <div class="container pt-18 pb-15 pt-md-20 pb-md-19 text-center">
            <div class="row">
                <div class="col-md-10 col-xl-8 mx-auto">
                    <div class="post-header">
                        <div class="post-category text-line text-white">
                            <a href="#" class="text-reset" rel="category">{{ object.property_type.name }}</a>
                        </div>
                        <h1 class="display-1 mb-4 text-white">{{ object.name }}</h1>
                        <p class="mb-4 text-white">
                            <i class="bx bx-map"></i>
                            <a href="#" class="text-reset">
                                <span>
                                    {{ object.address }} - {{ object.city.name }} {{ object.city.state.name }}
                                    {{ object.city.state.country }}
                                </span>
                            </a>
                        </p>
                        <ul class="post-meta text-white">
                            <li class="post-author">
                                <i class="uil uil-money-stack"></i>
                                <a href="#" class="text-reset">
                                    <span>Rs {{ object.price_start }} - {{ object.price_end }}</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>


    {# DOWN PAGE #}
    <section class="wrapper bg-light">
        <div class="container py-14 py-md-16">
            <div class="row gx-lg-8 gx-xl-12">
                <div class="col-lg-8">
                    <div class="blog single">
                        <div class="card">

                            {# IMAGE #}
                            <figure class="card-img-top">
                                <img src="{% if object.image %}{{ object.image.url }}{% else %}
                                {% static 'website/img/photos/bg16.png' %}{% endif %}"
                                     alt="">
                            </figure>

                            {# MAIN #}
                            <div class="card-body">
                                <div class="classic-view">
                                    <article class="post">

                                        {# IMAGES #}
                                        {# IMAGES AREA #}
                                        {% if object.get_images %}
                                            <div class="swiper-container blog grid-view mb-16 swiper-container-0"
                                                 data-margin="30"
                                                 data-dots="true" data-items-md="2" data-items-xs="1">
                                                <div class="swiper swiper-initialized swiper-horizontal swiper-pointer-events swiper-backface-hidden">
                                                    <div class="swiper-wrapper" id="swiper-wrapper-fd861013114bc4607"
                                                         aria-live="off"
                                                         style="cursor: grab; transform: translate3d(0px, 0px, 0px);">
                                                        {% for image in object.get_images %}
                                                            <div class="swiper-slide swiper-slide-active" role="group"
                                                                 aria-label="1 / 4"
                                                                 style="width: 263px; margin-right: 30px;">
                                                                <article>
                                                                    {% if image.image %}
                                                                        <figure class="hover-scale rounded cursor-dark">
                                                                            <a href="{{ image.image.url }}"
                                                                               data-glightbox="title: {{ object.name }}; description: {{ object.name }} image #{{ image.pk }}"
                                                                               data-gallery="post">
                                                                                <img src="{{ image.image.url }}" alt="">
                                                                            </a>
                                                                        </figure>
                                                                    {% else %}
                                                                        <figure class="hover-scale rounded cursor-dark">
                                                                            <a href="{% static 'website/img/photos/bg16.png' %}"
                                                                               data-glightbox="title: No Image; description: image is not available"
                                                                               data-gallery="post">
                                                                                <img src="{% static 'website/img/photos/bg16.png' %}"
                                                                                     alt="">
                                                                            </a>
                                                                        </figure>
                                                                    {% endif %}
                                                                </article>
                                                            </div>
                                                        {% endfor %}

                                                    </div>
                                                    <span class="swiper-notification" aria-live="assertive"
                                                          aria-atomic="true"></span>
                                                </div>

                                                <div class="swiper-controls">
                                                    <div class="swiper-pagination swiper-pagination-clickable swiper-pagination-bullets swiper-pagination-horizontal">
                                            <span class="swiper-pagination-bullet swiper-pagination-bullet-active"
                                                  tabindex="0" role="button" aria-label="Go to slide 1"
                                                  aria-current="true">
                                            </span>
                                                        <span class="swiper-pagination-bullet" tabindex="0"
                                                              role="button"
                                                              aria-label="Go to slide 2">
                                            </span>
                                                        <span class="swiper-pagination-bullet" tabindex="0"
                                                              role="button"
                                                              aria-label="Go to slide 3"></span>
                                                        <span class="swiper-pagination-bullet" tabindex="0"
                                                              role="button"
                                                              aria-label="Go to slide 4"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endif %}

                                        <div class="post-content mb-5">
                                            <p style="margin-top: 50px;">{{ object.content|safe }}</p>
                                        </div>
                                    </article>
                                </div>


                                {# FLOOR PLANS #}
                                {# FLOORS #}
                                {% if object.get_floor_plans %}
                                    <hr>
                                    <h3 class="mb-6">Floor Plans</h3>
                                    <div class="accordion accordion-wrapper" id="accordionSimpleExample">

                                        {# LIST OF FLOOR PLANS #}
                                        {% for plan in object.get_floor_plans %}
                                            <div class="card plain accordion-item">
                                                <div class="card-header" id="headingSimple{{ plan.pk }}">
                                                    <button class="collapsed" data-bs-toggle="collapse"
                                                            data-bs-target="#collapseSimple{{ plan.pk }}"
                                                            aria-expanded="false"
                                                            aria-controls="collapseSimple{{ plan.pk }}">
                                                                {{ plan.bed_rooms }} BED Plan&nbsp;&nbsp;-&nbsp;&nbsp;
                                                                <b><i class="fa fa-bed"></i> {{ plan.bed_rooms }}</b> -
                                                                <b><i class="fa fa-shower"></i> {{ plan.bath_rooms }}</b> -
                                                        <b>Price:</b>  Rs{{ plan.price_start }} - Rs{{ plan.price_end }} -
                                                        <b>Size:</b> {{ plan.size_start }} - {{ plan.size_end }} sq.ft


                                                    </button>
                                                </div>
                                                <div id="collapseSimple{{ plan.pk }}"
                                                     class="accordion-collapse collapse"
                                                     aria-labelledby="headingSimple{{ plan.pk }}"
                                                     data-bs-parent="#accordionSimpleExample">
                                                    <div class="card-body">
                                                        {% if plan.image %}
                                                            <img src="{{ plan.image.url }}" alt="" height="100%" width="100%">
                                                        {% endif %}

                                                        {% if plan.description %}
                                                            <hr class="my-4"/>
                                                            <h4>Description</h4>
                                                            <p class="my-0">
                                                                {{ plan.description }}
                                                            </p>
                                                        {% endif %}

                                                        {# PLAN FILE #}
                                                        {% if plan.file %}
                                                            <hr class="my-4"/>
                                                            <h4>Download</h4>
                                                            <b>
                                                                <a href="{{ plan.file.url }}">
                                                                    <i class="fa fa-link"></i> Download floor plan
                                                                </a>
                                                            </b>
                                                        {% endif %}
                                                        <br><br>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}


                                        {# PAYMENT PLANS #}
                                        {% if object.floor_payment_file or object.floor_payment_image %}
                                            <div class="card plain accordion-item">
                                                <div class="card-header" id="headingSimplepayment-plan">
                                                    <button class="collapsed" data-bs-toggle="collapse"
                                                            data-bs-target="#collapseSimplepayment-plan"
                                                            aria-expanded="false"
                                                            aria-controls="collapseSimplepayment-plan">
                                                        <div class="row justify-end">
                                                            <div class="cols">
                                                                Payments Plan
                                                            </div>
                                                        </div>
                                                    </button>
                                                </div>


                                                <div id="collapseSimplepayment-plan" class="accordion-collapse collapse"
                                                     aria-labelledby="headingSimplepayment-plan"
                                                     data-bs-parent="#accordionSimpleExample">
                                                    <div class="card-body">
                                                        {% if object.floor_payment_image %}
                                                            <img height="100%" width="100%" src="{{ object.floor_payment_image.url }}" alt="">
                                                        {% endif %}

                                                        {% if object.floor_payment_description %}
                                                            <hr class="my-4"/>
                                                            <h4>Description</h4>
                                                            <p class="my-0">
                                                                {{ object.floor_payment_description }}
                                                            </p>
                                                        {% endif %}

                                                        {# PLAN FILE #}
                                                        {% if object.floor_payment_file %}
                                                            <hr class="my-4"/>
                                                            <h4>Download</h4>
                                                            <b>
                                                                <a href="{{ object.floor_payment_file.url }}">
                                                                    <i class="fa fa-link"></i> Download payments plans
                                                                </a>
                                                            </b>
                                                        {% endif %}
                                                        <br><br>
                                                    </div>
                                                </div>

                                            </div>
                                        {% endif %}

                                        {# PAYMENT DESIGN #}
                                        {% if object.floor_design_file or object.floor_design_image %}
                                            <div class="card plain accordion-item">
                                                <div class="card-header" id="headingSimplepayment1-plan">
                                                    <button class="collapsed" data-bs-toggle="collapse"
                                                            data-bs-target="#collapseSimplepayment1-plan"
                                                            aria-expanded="false"
                                                            aria-controls="collapseSimplepayment1-plan">
                                                        <div class="row justify-end">
                                                            <div class="cols">
                                                                Floor Design
                                                            </div>
                                                        </div>
                                                    </button>
                                                </div>


                                                <div id="collapseSimplepayment1-plan" class="accordion-collapse collapse"
                                                     aria-labelledby="headingSimplepayment1-plan"
                                                     data-bs-parent="#accordionSimpleExample">
                                                    <div class="card-body">
                                                        {% if object.floor_design_image %}
                                                            <img height="100%" width="100%" src="{{ object.floor_design_image.url }}" alt="">
                                                        {% endif %}

                                                        {% if object.floor_design_description %}
                                                            <hr class="my-4"/>
                                                            <h4>Description</h4>
                                                            <p class="my-0">
                                                                {{ object.floor_design_description }}
                                                            </p>
                                                        {% endif %}

                                                        {# PLAN FILE #}
                                                        {% if object.floor_design_file %}
                                                            <hr class="my-4"/>
                                                            <h4>Download</h4>
                                                            <b>
                                                                <a href="{{ object.floor_design_file.url }}">
                                                                    <i class="fa fa-link"></i> Download Floor Design
                                                                </a>
                                                            </b>
                                                        {% endif %}
                                                        <br><br>
                                                    </div>
                                                </div>

                                            </div>
                                        {% endif %}

                                    </div>

                                {% endif %}

                                {# VIDEOS #}
                                {% if object.get_videos or object.youtube_video_id %}
                                    <hr>
                                    <h3 class="mb-6">3D Animated and Construction Videos</h3>
                                    {% if object.youtube_video_id %}
                                        <div class="player" data-plyr-provider="youtube"
                                             data-plyr-embed-id="{{ object.youtube_video_id }}"></div>
                                    {% endif %}
                                    {% if object.get_videos %}
                                        <div class="swiper-container blog grid-view mb-16 swiper-container-0"
                                             style="margin-top: 50px"
                                             data-margin="30"
                                             data-dots="true" data-items-md="2" data-items-xs="1">
                                            <div class="swiper swiper-initialized swiper-horizontal swiper-pointer-events swiper-backface-hidden">
                                                <div class="swiper-wrapper" id="swiper-wrapper-fd861013114bc4607"
                                                     aria-live="off"
                                                     style="cursor: grab; transform: translate3d(0px, 0px, 0px);">
                                                    {% for video in object.get_videos %}
                                                        <div class="swiper-slide swiper-slide-active" role="group"
                                                             aria-label="1 / 4"
                                                             style="width: 263px; margin-right: 30px;">
                                                            <article>
                                                                <div class="player" data-plyr-provider="youtube"
                                                                     data-plyr-embed-id="{{ video.youtube_video_id }}"></div>
                                                            </article>
                                                        </div>
                                                    {% endfor %}

                                                </div>
                                                <span class="swiper-notification" aria-live="assertive"
                                                      aria-atomic="true"></span>
                                            </div>

                                            <div class="swiper-controls">
                                                <div class="swiper-pagination swiper-pagination-clickable swiper-pagination-bullets swiper-pagination-horizontal">
                                            <span class="swiper-pagination-bullet swiper-pagination-bullet-active"
                                                  tabindex="0" role="button" aria-label="Go to slide 1"
                                                  aria-current="true">
                                            </span>
                                                    <span class="swiper-pagination-bullet" tabindex="0" role="button"
                                                          aria-label="Go to slide 2">
                                            </span>
                                                    <span class="swiper-pagination-bullet" tabindex="0" role="button"
                                                          aria-label="Go to slide 3"></span>
                                                    <span class="swiper-pagination-bullet" tabindex="0" role="button"
                                                          aria-label="Go to slide 4"></span>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endif %}

                                {# DOWNLOAD AREA #}
                                {% if object.price_list_file or object.floor_map_file %}
                                    {# DOWNLOAD #}
                                    <hr>
                                    <div class="widget">
                                        <h3 class="widget-title mb-3">Available Downloads</h3>
                                        <div class="row">
                                            <div class="col">
                                                {% if object.price_list_file %}
                                                    <a href="{{ object.price_list_file.url }}" target="_blank">
                                                        <i class="uil uil-download-alt"></i>
                                                        <span class="underline-3 style-2 primary">&nbsp;Download Price List</span>
                                                    </a>
                                                {% endif %}
                                            </div>
                                            <div class="col">
                                                {% if object.floor_map_file %}
                                                    <p class="">
                                                        <a href="{{ object.floor_map_file.url }}" target="_blank"
                                                           class="">
                                                            <i class="uil uil-download-alt"></i>
                                                            <span class="underline-3 style-2 primary">
                                                                &nbsp;Download Floor Plans
                                                            </span>
                                                        </a>
                                                    </p>
                                                {% endif %}
                                            </div>
                                        </div>

                                    </div>
                                {% endif %}

                                {# FOOTER #}
                                <hr>
                                <div class="post-footer d-md-flex flex-md-row justify-content-md-between align-items-center">
                                    <div>
                                        <ul class="list-unstyled tag-list mb-0">
                                            {% for tag in object.tags.all %}
                                                <li>
                                                    <a href="#"
                                                       class="btn btn-soft-ash btn-sm rounded-pill mb-0">
                                                        {{ tag.name }}
                                                    </a>
                                                </li>
                                            {% endfor %}

                                        </ul>
                                    </div>
                                    <div class="mb-0 mb-md-2">
                                        <div class="dropdown share-dropdown btn-group">
                                            <button class="btn btn-sm btn-red rounded-pill btn-icon btn-icon-start dropdown-toggle mb-0 me-0"
                                                    data-bs-toggle="dropdown" aria-haspopup="true"
                                                    aria-expanded="false">
                                                <i class="uil uil-share-alt"></i> Share
                                            </button>
                                            <div class="dropdown-menu">
                                                <a class="dropdown-item" href="#">
                                                    <i class="uil uil-twitter"></i>Twitter
                                                </a>
                                                <a class="dropdown-item" href="#">
                                                    <i class="uil uil-facebook-f"></i>Facebook
                                                </a>
                                                <a class="dropdown-item" href="#">
                                                    <i class="uil uil-linkedin"></i>Linkedin
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                {# -------------------------------------------------------------------------------------------------- #}
                {# RIGHT SIDE #}
                <aside class="col-lg-4 sidebar mt-11 mt-lg-6">
                    <div class="widget">
                        <form class="search-form" action="{% url 'website:projects' %}" method="get">
                            <div class="input-group">
                                <label for="id_name" style="display: none;">Name contains:</label>
                                <input type="text" name="name" placeholder="Name" id="id_name" class="form-control">
                                <div class="input-group-append">
                                    <button class="btn btn-primary" type="submit">
                                        <i class="fa fa-search"></i> Search
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>

                    {# MAP #}
                    {% if map %}
                        <div class="widget">
                            <h4 class="widget-title mb-3">Map</h4>
                            <p>{{ object.address }}, {{ object.city }} - {{ object.city.state.name }}
                                - {{ object.city.state.country }}</p>
                            <div>
                                {{ map|safe }}
                            </div>
                        </div>
                    {% endif %}

                    {# FEATURES #}
                    <div class="widget">
                        <h4 class="widget-title mb-3">Features</h4>
                        <ul class="list-unstyled bullet-primary text-reset">
                            {% for feature in object.features.all %}
                                <li>
                                    <i class="{{ feature.icon }}"></i><a href="{% url 'website:projects' %}"> {{ feature.name }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>

                    {# POPULAR POSTS #}
                    <div class="widget">
                        <h4 class="widget-title mb-3">Popular Posts</h4>
                        <ul class="image-list">
                            {% for project in projects %}
                                <li>
                                    <figure class="rounded">
                                        <a href="{% url 'website:project' project.slug %}">
                                            <img src="{% if project.image %}{{ project.image.url }}{% else %}{% static 'website/img/photos/bg16.png' %}{% endif %}"
                                                 alt="">
                                        </a>
                                    </figure>

                                    <div class="post-content">
                                        <h6 class="mb-2">
                                            <a class="link-dark" href="{% url 'website:project' project.slug %}">
                                                {{ project.name }}
                                            </a>
                                        </h6>
                                        <ul class="post-meta">
                                            <li class="post-date"><i
                                                    class="uil uil-money-stack"></i><span>Rs {{ project.price_start }} - {{ project.price_end }}</span>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                            {% endfor %}

                        </ul>
                    </div>

                    {# TAGS #}
                    <div class="widget">
                        <h4 class="widget-title mb-3">Tags</h4>
                        <ul class="list-unstyled tag-list">
                            {% for tag in tags %}
                                <li>
                                    <a href="{% url 'website:projects' %}" class="btn btn-soft-ash btn-sm rounded-pill">
                                        {{ tag.name }}
                                    </a>
                                </li>
                            {% endfor %}

                        </ul>
                    </div>

                </aside>
            </div>
        </div>
    </section>

{% endblock %}